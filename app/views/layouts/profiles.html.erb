<!DOCTYPE html>
<html lang="es">
  <head>
    <%= display_meta_tags %>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="h-full">
    <%=render "layouts/nav"%>  
    <%= yield %>
    <%=render "layouts/footer"%>
    
    <!-- Scroll to Top Button -->
    <button 
      id="scroll-to-top" 
      style="position: fixed; bottom: 2rem; right: 2rem; z-index: 9999;"
      class="flex items-center justify-center w-14 h-14 bg-gradient-to-br from-blue-600 to-purple-600 text-white rounded-full shadow-2xl hover:shadow-xl hover:scale-110 transition-all duration-300 cursor-pointer"
      aria-label="Volver arriba"
      type="button">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6">
        <path fill-rule="evenodd" d="M9.47 6.47a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 1 1-1.06 1.06L10 8.06l-3.72 3.72a.75.75 0 0 1-1.06-1.06l4.25-4.25Z" clip-rule="evenodd" />
      </svg>
    </button>

    <script>
      (function() {
        function initScrollToTop() {
          const scrollButton = document.getElementById('scroll-to-top');
          
          if (!scrollButton) return;
          
          // Click handler
          scrollButton.addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({ 
              top: 0, 
              behavior: 'smooth' 
            });
          });
          
          // Scroll handler
          function handleScroll() {
            const scrollY = window.scrollY || window.pageYOffset;
            
            if (scrollY > 300) {
              scrollButton.style.opacity = '1';
              scrollButton.style.pointerEvents = 'auto';
            } else {
              scrollButton.style.opacity = '0';
              scrollButton.style.pointerEvents = 'none';
            }
          }
          
          // Initial state
          scrollButton.style.opacity = '0';
          scrollButton.style.pointerEvents = 'none';
          
          // Initial check
          handleScroll();
          
          // Listen to scroll
          window.addEventListener('scroll', handleScroll, { passive: true });
        }
        
        // Initialize
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initScrollToTop);
        } else {
          initScrollToTop();
        }
        
        // Turbo support
        if (typeof Turbo !== 'undefined') {
          document.addEventListener('turbo:load', initScrollToTop);
        }
      })();
    </script>
  </body>
</html>
