<%if tiktok_profile.avatar.attached? || tiktok_profile.avatar_larger.present?%>
  <div class="group relative">
    <!-- Card Container -->
    <div class="relative overflow-hidden rounded-2xl bg-white shadow-md ring-1 ring-gray-900/5 transition-all duration-500 hover:shadow-2xl hover:-translate-y-2">
      
      <!-- Image Container with Overlay -->
      <div class="relative aspect-square w-full overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200">
        <%=link_to tiktok_profile_path(tiktok_profile), class: 'block h-full w-full' do%>
                <% if tiktok_profile.avatar.attached? %>
                  <%= image_tag(direct_blob_url(tiktok_profile.avatar),
                      class: 'h-full w-full object-cover object-center transition-all duration-700 group-hover:scale-110 group-hover:brightness-110',
                      loading: 'lazy',
                      decoding: 'async',
                      alt: "#{tiktok_profile.display_nickname} - Creador TikTok en Paraguay"
                  ) %>
                <% elsif tiktok_profile.avatar_larger.present? %>
                  <%= image_tag(tiktok_profile.avatar_larger,
                      class: 'h-full w-full object-cover object-center transition-all duration-700 group-hover:scale-110 group-hover:brightness-110',
                      loading: 'lazy',
                      decoding: 'async',
                      alt: "#{tiktok_profile.display_nickname} - Creador TikTok en Paraguay"
                  ) %>
                <% end %>
          
          <!-- Gradient Overlay for better text visibility -->
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
          
          <!-- Verified Badge - Premium Position -->
          <% if tiktok_profile.verified %>
            <div class="absolute top-4 right-4 z-20">
              <div class="relative">
                <!-- Glow Effect -->
                <div class="absolute inset-0 rounded-full bg-pink-500 blur-lg opacity-60 animate-pulse"></div>
                <!-- Badge -->
                <div class="relative flex items-center justify-center w-10 h-10 bg-white rounded-full shadow-xl border-2 border-pink-100">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#ff0050" class="w-6 h-6">
                    <path fill-rule="evenodd" d="M16.403 12.652a3 3 0 0 0 0-5.304 3 3 0 0 0-3.75-3.751 3 3 0 0 0-5.305 0 3 3 0 0 0-3.751 3.75 3 3 0 0 0 0 5.305 3 3 0 0 0 3.75 3.751 3 3 0 0 0 5.305 0 3 3 0 0 0 3.751-3.75Zm-2.546-4.46a.75.75 0 0 0-1.214-.883l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z" clip-rule="evenodd" />
                  </svg>
                </div>
              </div>
            </div>
          <% end %>
          
          <!-- Hover Stats Overlay - Premium Info -->
          <div class="absolute inset-x-0 bottom-0 z-10 p-6 transform translate-y-full group-hover:translate-y-0 transition-transform duration-500">
            <div class="space-y-3">
              <!-- Followers Badge -->
              <% if tiktok_profile.followers.present? %>
                <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/95 backdrop-blur-md shadow-xl border border-white/20">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-pink-600">
                    <path d="M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z" />
                  </svg>
                  <span class="text-sm font-bold text-gray-900">
                    <%= number_to_human(tiktok_profile.followers, format: '%n%u', units: { thousand: 'K', million: 'M', billion: 'B' }, precision: 1) %>
                  </span>
                  <span class="text-xs font-medium text-gray-600">seguidores</span>
                </div>
              <% end %>
            </div>
          </div>
        <%end%>
      </div>
      
      <!-- Content Section - Enhanced -->
      <div class="relative p-6 bg-gradient-to-b from-white to-gray-50">
        <div class="space-y-3">
          <!-- Name with subtle icon -->
          <div class="flex items-start justify-between gap-3">
            <div class="flex-1 min-w-0">
              <h3 class="text-lg font-bold text-gray-900 truncate leading-tight">
                <%=link_to tiktok_profile_path(tiktok_profile), class: 'hover:text-pink-600 transition-colors' do%>
                  <%=tiktok_profile.display_nickname%>
                <%end%>
              </h3>
              
              <!-- Username with TikTok icon -->
              <div class="mt-1.5 flex items-center gap-1.5">
                <%= link_to "https://www.tiktok.com/@#{tiktok_profile.display_username}", 
                  target: "_blank", 
                  rel: "noopener",
                  class: 'group/username inline-flex items-center gap-1.5 text-sm text-gray-600 hover:text-pink-600 transition-colors' do %>
                  <div class="relative">
                    <div class="absolute inset-0 bg-gradient-to-r from-pink-600 via-red-600 to-black rounded blur-sm opacity-0 group-hover/username:opacity-75 transition-opacity"></div>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="relative w-4 h-4">
                      <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.2.19-1.27.41-2.42 1.33-2.98 2.59-.63 1.38-.6 2.99-.24 4.43.62 2.29 2.57 4.03 4.94 4.47 1.75.33 3.64.13 5.24-.72 1.78-.95 2.99-2.7 3.25-4.64.06-.52.08-1.05.07-1.57 0-2.35-.01-4.7.02-7.05.08-1.4.54-2.79 1.35-3.94 1.31-1.92 3.58-3.17 5.91-3.21 1.43-.08 2.86.31 4.08 1.03 2.02 1.19 3.44 3.37 3.65 5.71.02.5.03 1 .01 1.49-.18 1.9-1.12 3.72-2.58 4.96-1.66 1.44-3.98 2.13-6.15 1.72-.02-1.48.04-2.96.04-4.44.99.32 2.15.23 3.2-.19 1.27-.41 2.42-1.33 2.98-2.59.63-1.38.6-2.99.24-4.43-.62-2.29-2.57-4.03-4.94-4.47-1.75-.33-3.64-.13-5.24.72-1.78.95-2.99 2.7-3.25 4.64-.06.52-.08 1.05-.07 1.57 0 2.35.01 4.7-.02 7.05-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.2.19-1.27.41-2.42 1.33-2.98 2.59-.63 1.38-.6 2.99-.24 4.43.62 2.29 2.57 4.03 4.94 4.47 1.75.33 3.64.13 5.24-.72 1.78-.95 2.99-2.7 3.25-4.64.06-.52.08-1.05.07-1.57 0-2.35.01-4.7-.02-7.05z"/>
                    </svg>
                  </div>
                  <span class="font-medium">@<%= tiktok_profile.display_username %></span>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3.5 h-3.5 opacity-0 -translate-x-1 group-hover/username:opacity-100 group-hover/username:translate-x-0 transition-all">
                    <path fill-rule="evenodd" d="M3 10a.75.75 0 0 1 .75-.75h10.638L10.23 5.29a.75.75 0 1 1 1.04-1.08l5.5 5.25a.75.75 0 0 1 0 1.08l-5.5 5.25a.75.75 0 1 1-1.04-1.08l4.158-3.96H3.75A.75.75 0 0 1 3 10Z" clip-rule="evenodd" />
                  </svg>
                <% end %>
              </div>
            </div>
          </div>
          
          <!-- Stats Bar - Quick Info -->
          <% if tiktok_profile.followers.present? %>
            <div class="flex items-center gap-3 pt-3 border-t border-gray-200">
              <!-- Followers -->
              <div class="flex items-center gap-1.5">
                <div class="flex items-center justify-center w-7 h-7 rounded-lg bg-pink-50">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 text-pink-600">
                    <path d="M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z" />
                  </svg>
                </div>
                <div class="flex flex-col">
                  <span class="text-xs font-bold text-gray-900 leading-none">
                    <%= number_to_human(tiktok_profile.followers, format: '%n%u', units: { thousand: 'K', million: 'M', billion: 'B' }, precision: 1) %>
                  </span>
                  <span class="text-[10px] text-gray-500 leading-none mt-0.5">followers</span>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
      
      <!-- Animated Border on Hover -->
      <div class="absolute inset-0 rounded-2xl ring-2 ring-pink-500 opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100 transition-all duration-500 pointer-events-none"></div>
      
      <!-- Corner Accent -->
      <div class="absolute -top-1 -right-1 w-20 h-20 bg-gradient-to-br from-pink-500/10 to-red-500/10 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
    </div>
  </div>
<%end%>

